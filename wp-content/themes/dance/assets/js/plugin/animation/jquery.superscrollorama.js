!function(t){t.superscrollorama=function(e){var s={};s.settings=t.extend({},{isVertical:!0,triggerAtCenter:!0,playoutAnimations:!0,reverse:!0},e);var i,n,o=t(window),r=[],a=[],l={x:0,y:0},p=!1;function f(t){var e={top:parseFloat(t.css("top")),left:parseFloat(t.css("left"))};return isNaN(e.top)&&(e.top=0),isNaN(e.left)&&(e.left=0),e}function c(){p&&(d(),p=!1)}function g(t){t.el.css("position",t.origPositioning.pos),t.el.css("top",t.origPositioning.top),t.el.css("left",t.origPositioning.left)}function u(t,e){t&&(t.totalProgress?t.totalProgress(e).pause():t.progress(e).pause())}function d(){var e,n,p,c=s.settings.isVertical?o.scrollTop()+l.y:o.scrollLeft()+l.x,d=s.settings.triggerAtCenter?s.settings.isVertical?-o.height()/2:-o.width()/2:0,v=r.length;for(e=0;e<v;e++){var h=r[e],w=h.target,P=h.offset;if("string"==typeof w?(i=t(w).offset()||{},n=s.settings.isVertical?i.top+l.y:i.left+l.x,P+=d):"number"==typeof w?n=w:t.isFunction(w)?n=w.call(this):(i=w.offset(),n=s.settings.isVertical?i.top+l.y:i.left+l.x,P+=d),p=(n+=P)+h.dur,c>n&&c<p&&"TWEENING"!==h.state&&(h.state="TWEENING",h.start=n,h.end=p),c<n&&"BEFORE"!==h.state&&h.reverse)s.settings.playoutAnimations||0===h.dur?h.tween.reverse():u(h.tween,0),h.state="BEFORE";else if(c>p&&"AFTER"!==h.state)s.settings.playoutAnimations||0===h.dur?h.tween.play():u(h.tween,1),h.state="AFTER";else if("TWEENING"===h.state){var E=!1;if(h.tween.repeat&&(E=-1===h.tween.repeat()),E){var m=h.tween.totalProgress();null!==h.playeadLastPosition&&m!==h.playeadLastPosition||(1===m?h.tween.yoyo()?h.tween.reverse():h.tween.totalProgress(0).play():h.tween.play()),h.playeadLastPosition=m}else u(h.tween,(c-h.start)/(h.end-h.start))}}var F=a.length;for(e=0;e<F;e++){var y=a[e],N=y.el;if("PINNED"!==y.state){var T=y.spacer.offset();"UPDATE"===y.state&&g(y),n=s.settings.isVertical?T.top+l.y:T.left+l.x;var x=c>(p=(n+=y.offset)+y.dur)&&"BEFORE"===y.state||c<n&&"AFTER"===y.state;(c>n&&c<p||x)&&(y.pushFollowers&&"static"===N.css("position")&&N.css("position","relative"),y.origPositioning={pos:N.css("position"),top:y.spacer.css("top"),left:y.spacer.css("left")},y.fixedPositioning={top:s.settings.isVertical?-y.offset:T.top,left:s.settings.isVertical?T.left:-y.offset},N.css("position","fixed"),N.css("will-change","top"),N.css("top",y.fixedPositioning.top),N.css("left",y.fixedPositioning.left),y.pinStart=n,y.pinEnd=p,y.pushFollowers?s.settings.isVertical?y.spacer.height(y.dur+N.outerHeight(!0)):y.spacer.width(y.dur+N.outerWidth(!0)):"absolute"===y.origPositioning.pos?(y.spacer.width(0),y.spacer.height(0)):s.settings.isVertical?y.spacer.height(N.outerHeight(!0)):y.spacer.width(N.outerWidth(!0)),"UPDATE"===y.state?y.anim&&u(y.anim,0):y.onPin&&y.onPin("AFTER"===y.state),y.state="PINNED")}if("PINNED"===y.state)if(c<y.pinStart||c>y.pinEnd){var A=c<y.pinStart;y.state=A?"BEFORE":"AFTER",u(y.anim,A?0:1);var V=A?0:y.dur;s.settings.isVertical?y.spacer.height(y.pushFollowers?V:0):y.spacer.width(y.pushFollowers?V:0);var R=y.fixedPositioning.top-f(y.el).top,U=y.fixedPositioning.left-f(y.el).left;if(g(y),!y.pushFollowers||"absolute"===y.origPositioning.pos){var D;"relative"===y.origPositioning.pos?(D=s.settings.isVertical?parseFloat(y.origPositioning.top):parseFloat(y.origPositioning.left),isNaN(D)&&(D=0)):D=s.settings.isVertical?y.spacer.position().top:y.spacer.position().left;var I=s.settings.isVertical?"top":"left";y.el.css(I,D+V)}0!==R&&y.el.css("top",f(y.el).top-R),0!==U&&y.el.css("left",f(y.el).left-U),y.onUnpin&&y.onUnpin(!A)}else y.anim&&u(y.anim,(c-y.pinStart)/(y.pinEnd-y.pinStart))}}return s.addTween=function(t,e,i,n,o){return e.pause(),r.push({target:t,tween:e,offset:n||0,dur:i||0,reverse:void 0!==o?o:s.settings.reverse,state:"BEFORE"}),s},s.pin=function(e,i,n){"string"==typeof e&&(e=t(e));(n=t.extend({},{offset:0,pushFollowers:!0},n)).anim&&n.anim.pause();var o=t('<div class="superscrollorama-pin-spacer"></div>');return o.css("position","relative"),o.css("top",e.css("top")),o.css("left",e.css("left")),e.before(o),a.push({el:e,state:"BEFORE",dur:i,offset:n.offset,anim:n.anim,pushFollowers:n.pushFollowers,spacer:o,onPin:n.onPin,onUnpin:n.onUnpin}),s},s.updatePin=function(e,i,o){"string"==typeof e&&(e=t(e)),o.anim&&o.anim.pause();var r=a.length;for(n=0;n<r;n++){var l=a[n];e.get(0)===l.el.get(0)&&(i&&(l.dur=i),o.anim&&(l.anim=o.anim),o.offset&&(l.offset=o.offset),void 0!==o.pushFollowers&&(l.pushFollowers=o.pushFollowers),o.onPin&&(l.onPin=o.onPin),o.onUnpin&&(l.onUnpin=o.onUnpin),(i||o.anim||o.offset)&&"PINNED"===l.state&&(l.state="UPDATE",d()))}return s},s.removeTween=function(t,e,i){var n=r.length;void 0===i&&(i=!0);for(var o=0;o<n;o++){var a=r[o];a.target!==t||e&&a.tween!==e||(r.splice(o,1),i&&u(a.tween,0),n--,o--)}return s},s.removePin=function(e,i){"string"==typeof e&&(e=t(e)),void 0===i&&(i=!0);for(var n=a.length,o=0;o<n;o++){var r=a[o];r.el.is(e)&&(a.splice(o,1),i&&(r.spacer.remove(),g(r),r.anim&&u(r.anim,0)),n--,o--)}return s},s.setScrollContainerOffset=function(t,e){return l.x=t,l.y=e,s},s.triggerCheckAnim=function(t){return t?d():p=!0,s},o.scroll(function(){p=!0}),TweenLite.ticker.addEventListener("tick",c),s}}(jQuery);