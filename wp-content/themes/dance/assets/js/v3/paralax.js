!function(t){"use strict";var e,o=window,n=document,i=t(o),s=t(n),r=null,a={},l=null,c=null,p=null,f=null,d=function(t){this.strategy=t};d.prototype.start=function(t,e){return this.strategy.init(t,e)};var u=function(){};u.prototype.init=function(t,i){var s=(r=t).style;e=void 0!==s.transition||void 0!==s.WebkitTransition||void 0!==s.MozTransition||void 0!==s.MsTransition||void 0!==s.OTransition,n.querySelector||!1,a=i,p=o.innerWidth||n.documentElement.clientWidth,f=o.innerHeight||n.documentElement.clientHeight,l||(l=n.querySelectorAll(a.layerClass),c=l.length),this.go()},u.prototype.go=function(){},u.prototype.getXY=function(t){if(!t.pageX){var e=n.documentElement,o=n.body;t.pageX=t.clientX+(e&&e.scrollLeft||o&&o.scrollLeft||0)-(e.clientLeft||0),t.pageY=t.clientY+(e&&e.scrollTop||o&&o.scrollTop||0)-(e.clientTop||0)}return{mouseX:t.pageX,mouseY:t.pageY}},u.prototype.addEvent=function(t,e,n){e.addEventListener(t,function(t){var e=t||o.event;n.call(this,e)},!1)},u.prototype.createEl=function(t){var e=n.createElement("div");e.innerHTML=t;var o=e.childNodes[0];return e.removeChild(o),o},u.prototype.getCssString=function(t,o,n){var i="";return this instanceof v&&(void 0===n&&(n=1),i=e?"-webkit-transition: -webkit-transform 1s easy;-moz-transition: -moz-transform 1s easy;-ms-transition: -ms-transform 1s easy;-o-transition: -o-transform 1s easy;-moz-transform: translate3d("+t*n+"px, "+o*n+"px, 0px);-ms-transform: translate3d("+t*n+"px, "+o*n+"px, 0px);-o-transform: translate3d("+t*n+"px, "+o*n+"px, 0px);-webkit-transform: translate3d("+t*n+"px, "+o*n+"px, 0px)":"left:"+t+"px;top:"+o+"px;"),this instanceof g&&(i=e?"-webkit-transition: top 0.7s;-moz-transition: top 0.7s;-ms-transition: top 0.7s;-o-transition: top 0.7s;transition: top 0.7s;top:"+o+"px;":"top:"+o+"px;","background"===n&&(i="-webkit-transition: background-position 0.2s;-ms-transition: background-position 0.2s;-o-transition: background-position 0.2s;-moz-transition: background-position 0.2s;transition: background-position 0.2s;")),i};var v=function(){this.go=function(){this.addEvent("mousemove",r,t.move)},this.move=function(e){for(var o,n,i=t.getXY(e),s=0;s<c;s++){var r=l[s],d=r.getAttribute("data-shift");o=d*(.5*p-i.mouseX),n=d*(.5*f-i.mouseY),a.differentSides?r.style.cssText=s%2==0?t.getCssString(o,n):t.getCssString(o,n,-1):r.style.cssText=t.getCssString(o,n)}};var t=this};v.prototype=Object.create(u.prototype);var g=function(){this.go=function(){for(var o=0;o<c;o++){var i=l[o],r=(t(i).data("type"),i.getAttribute("data-img"));this.prepareSprites(i),i.style.cssText+=e.getCssString(0,0,"background")+"background: url("+r+") 50% 0 fixed;",a.layerNav&&this.createNavigation(i,o)}this.addEvent("scroll",n,e.scroll),a.layerNav&&s.on("click",".wool-nav",e.changeSection)},this.scroll=function(o){for(var n=0;n<c;n++){var s=l[n],r=s.offsetTop,a=0;if(i.scrollTop()+f>r&&r+t(s).height()>i.scrollTop()){var p=-i.scrollTop()/t(s).data("shift");t(s).data("offsety")&&(p+=t(s).data("offsety"));var d="50% "+p+"px";t(s).css({backgroundPosition:d}),s.sprites&&(a=s.sprites.length);for(var u=0;u<a;u++){var v=s.sprites[u],g=v.offset;p=-(i.scrollTop()-r)/t(v).data("shift");v.style.cssText+=e.getCssString(0,p+g)}i.scrollTop()}}},this.prepareSprites=function(e){for(var o=e.querySelectorAll('[data-type="floating"]'),n=o.length,i=0;i<n;i++){var s=o[i],r=t(s).data("offsety");s.offset=s.offsetTop,r&&(s.offset+=r)}e.sprites=o},this.createNavigation=function(t,e){if(void 0!==l[e+1]){var o='<a class="wool-nav next" data-slide="'+(e+1)+'"></a>';this.createEl(o);t.appendChild(this.createEl(o))}},this.changeSection=function(){var e=this.getAttribute("data-slide"),o=l[e].offsetTop;return t("body, html").animate({scrollTop:o},1e3,"easeInSine"),!1};var e=this};g.prototype=Object.create(u.prototype),t.fn.woolParalax=function(e){var o={type:"none",layerNav:!0,layerClass:".wool-layer",differentSides:!0};return t.extend(o,e),this.each(function(){switch(o.type){case"none":new d(new v).start(this,o);break;case"vertical":new d(new g).start(this,o)}})}}(jQuery);